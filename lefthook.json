{
    "$schema": "./node_modules/lefthook/schema.json",
    "commit-msg": {
        "jobs": [
            {
                "name": "Validate commit message format",
                "run": "bunx --bun commitlint --edit {1}"
            }
        ]
    },
    "pre-commit": {
        "jobs": [
            {
                "group": {
                    "jobs": [
                        {
                            "name": "Clean unused code",
                            "run": "bunx --bun knip --fix"
                        },
                        {
                            "glob": ["*.md"],
                            "name": "Lint markdown files",
                            "run": "bunx markdownlint-cli2 --config .markdownlint.json --fix {staged_files}",
                            "stage_fixed": true
                        },
                        {
                            "glob": ["*.yml", "*.yaml"],
                            "name": "Lint yaml files",
                            "run": "bunx --bun prettier --write {staged_files}",
                            "stage_fixed": true
                        },
                        {
                            "name": "Lint other files",
                            "run": "bunx --bun @biomejs/biome check --write --unsafe --no-errors-on-unmatched --files-ignore-unknown=true --colors=off {staged_files}",
                            "stage_fixed": true
                        },
                        {
                            "name": "Sort package.json",
                            "run": "bunx --bun sort-package-json",
                            "stage_fixed": true
                        }
                    ]
                },
                "name": "Clean checking"
            },
            {
                "name": "Type checking",
                "run": "bunx tsc --noEmit"
            }
        ]
    },
    "pre-push": {
        "jobs": [
            {
                "name": "Validate branch name",
                "run": "bunx validate-branch-name -r ^(main|develop|next)$|^(feature|(bug|hot)fix){1}/(issue-[0-9]{1,}-|)([a-z]{1,}-){0,}[a-z]{1,}$|^release/v((0|[1-9][0-9]{0,}).){2}(0|[1-9][0-9]{0,})$"
            },
            {
                "name": "Check dependencies vulnerabilities",
                "run": "bun pm scan"
            }
        ]
    },
    "prepare-commit-msg": {
        "jobs": [
            {
                "env": {
                    "LEFTHOOK": "0"
                },
                "interactive": true,
                "name": "Execute commitizen CLI",
                "run": "bunx --bun czg --hook"
            }
        ]
    }
}
